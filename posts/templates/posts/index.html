{% extends 'posts/layout.html' %}



{% block navigation %}
    {% if user.is_authenticated %}
    <nav class="navigation">
            Welcome! {{username}}           
            <a href="/posts/logout/">Logout</a>
    </nav>
    
    <button class="button">
        <a href = "posts/new">Create Posts</a>
    </button>
    <button class="button">
        <a href = "posts/myposts">My Posts</a>
    </button>
    
    {% else %}
    <nav class ="navigation">
              <button class="button">
            <a href="/posts/signup/">Signup</a> 
        </button>
        
        <button class="button">
            <a href="/posts/login/">Login</a>
        </button>
  
    </nav>
    {% endif %}

{% endblock navigation %}

{% block content %}
    
    <div class ="container"> 
        {% for post in posts %}
            <ul>
                <div class = "card-content">
                    <li> 
                    <h4>
                       <a href = "/posts/details/{{post.id}}/{{post.slug}}">{{post.title|upper}}</a>
                    </h4>
                    <p>{{post.body|truncatewords:100}}<a href = "/posts/details/{{post.id}}/{{post.slug}}"> >>>Readmore</a> </p>
                    </li>
                </div>
            
            </ul>
        {% endfor %}      
    </div>

{% endblock content %}

{% block right-sidebar %}
    <div class = "searchbar">
        <form action = "search/" method ="get">
            <input type ="text" name="q">
            <input type ="submit" value ="Search">
        </form>
    </div>
    {% if user.is_authenticated %}
        <h4>My Posts</h4>
            <ol class ="collection">
                {% if items|length > 1 %}
                    {% for item in items %}
                        <li class = "collection-item"><a href = "/posts/details/{{item.id}}/{{item.slug}}">{{item.title}}</a></li>
                    {% endfor %}
                {% elif items %}
                    <li class = "collection-item"><a href = "/posts/details/{{items.0.id}}/{{items.0.slug}}">{{items.0.title}}</a></li>
                {% else %}
                    <p> No Post</p>
                {% endif %}
            </ol>
    {% else %}
        <p>

        </p>
    {% endif %}
{% endblock right-sidebar %}